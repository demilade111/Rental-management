model Listing {
  id                  String               @id @default(cuid())
  landlordId          String
  title               String
  description         String?
  category            PropertyCategory
  residentialType     ResidentialType?
  commercialType      CommercialType?
  address             String
  city                String
  state               String
  country             String
  zipCode             String?
  bedrooms            Int?
  bathrooms           Int?
  size                Int?
  yearBuilt           Int?
  rentAmount          Float
  rentCycle           RentCycle
  securityDeposit     Float?
  availableDate       DateTime
  createdAt           DateTime             @default(now())
  updatedAt           DateTime             @updatedAt
  leases              Lease[]
  landlord            User                 @relation("LandlordListings", fields: [landlordId], references: [id])
  amenities           ListingAmenity[]
  images              ListingImage[]
  maintenanceRequests MaintenanceRequest[]

  @@index([landlordId])
  @@index([rentCycle])
  @@index([city, category])
}

model ListingAmenity {
  id        String   @id @default(cuid())
  listingId String
  name      String
  createdAt DateTime @default(now())
  listing   Listing  @relation(fields: [listingId], references: [id])

  @@unique([listingId, name])
  @@index([listingId])
}

model ListingImage {
  id        String   @id @default(cuid())
  listingId String
  url       String
  isPrimary Boolean  @default(false)
  createdAt DateTime @default(now())
  listing   Listing  @relation(fields: [listingId], references: [id])

  @@unique([listingId, url])
  @@index([listingId])
}
